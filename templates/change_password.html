{% extends "base.html" %}
{% block content %}
  <div class="row justify-content-center">
    <div class="col-md-5">
      <h2>Change Password</h2>
      <form method="post">
        <div class="mb-3">
          <label for="old_password" class="form-label">Old Password</label>
          <div class="input-group">
            <input
              id="old_password"
              name="old_password"
              type="password"
              class="form-control"
              required
            >
            <button
              class="btn btn-outline-secondary"
              type="button"
              id="toggleOld"
            >Show</button>
          </div>
        </div>

        <div class="mb-3">
          <label for="new_password" class="form-label">New Password</label>
          <div class="input-group">
            <input
              id="new_password"
              name="new_password"
              type="password"
              class="form-control"
              required
            >
            <button
              class="btn btn-outline-secondary"
              type="button"
              id="toggleNew"
            >Show</button>
          </div>
        </div>

        <div class="mb-3">
          <label for="confirm_password" class="form-label">Confirm New Password</label>
          <div class="input-group">
            <input
              id="confirm_password"
              name="confirm_password"
              type="password"
              class="form-control"
              required
            >
            <button
              class="btn btn-outline-secondary"
              type="button"
              id="toggleConfirm"
            >Show</button>
          </div>
        </div>

        <button type="submit" class="btn btn-primary w-100">Update Password</button>
      </form>
    </div>
  </div>

  <script>
    // helper to wire up a toggle
    function setupToggle(inputId, btnId) {
      const input = document.getElementById(inputId);
      const btn   = document.getElementById(btnId);
      btn.addEventListener('click', () => {
        const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
        input.setAttribute('type', type);
        btn.textContent = type === 'password' ? 'Show' : 'Hide';
      });
    }

    // initialize all three toggles
    setupToggle('old_password',     'toggleOld');
    setupToggle('new_password',     'toggleNew');
    setupToggle('confirm_password', 'toggleConfirm');
  </script>
{% endblock %}